<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.4 sans-serif,sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:sans-serif,sans-serif;font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;color:inherit;font-family:'ui-sans-serif, -apple-system, BlinkMacSystemFont , Segoe UI, Helvetica , Apple Color Emoji, Arial, sans-serif, Segoe UI Emoji, Segoe UI Symbol',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2.6rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;color:inherit;font-family:'ui-sans-serif, -apple-system, BlinkMacSystemFont , Segoe UI, Helvetica , Apple Color Emoji, Arial, sans-serif, Segoe UI Emoji, Segoe UI Symbol',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.77412rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;color:inherit;font-family:'ui-sans-serif, -apple-system, BlinkMacSystemFont , Segoe UI, Helvetica , Apple Color Emoji, Arial, sans-serif, Segoe UI Emoji, Segoe UI Symbol',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.46551rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;color:inherit;font-family:'ui-sans-serif, -apple-system, BlinkMacSystemFont , Segoe UI, Helvetica , Apple Color Emoji, Arial, sans-serif, Segoe UI Emoji, Segoe UI Symbol',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;color:inherit;font-family:'ui-sans-serif, -apple-system, BlinkMacSystemFont , Segoe UI, Helvetica , Apple Color Emoji, Arial, sans-serif, Segoe UI Emoji, Segoe UI Symbol',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.82605rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;color:inherit;font-family:'ui-sans-serif, -apple-system, BlinkMacSystemFont , Segoe UI, Helvetica , Apple Color Emoji, Arial, sans-serif, Segoe UI Emoji, Segoe UI Symbol',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.75077rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}ul{margin-left:1.4rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.4rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;font-size:0.85rem;line-height:1.4rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;font-size:1rem;line-height:1.4rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}blockquote{margin-left:1.4rem;margin-right:1.4rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.4rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.4rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.4rem;margin-bottom:calc(1.4rem / 2);margin-top:calc(1.4rem / 2);}li > ul{margin-left:1.4rem;margin-bottom:calc(1.4rem / 2);margin-top:calc(1.4rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.4rem / 2);}code{font-size:0.85rem;line-height:1.4rem;}kbd{font-size:0.85rem;line-height:1.4rem;}samp{font-size:0.85rem;line-height:1.4rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.93333rem;padding-right:0.93333rem;padding-top:0.7rem;padding-bottom:calc(0.7rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><meta name="generator" content="Gatsby 5.7.0"/><meta data-react-helmet="true" name="description"/><meta data-react-helmet="true" name="image" content="https://blog.mglee.dev/assets/banner.jpg"/><meta data-react-helmet="true" property="og:locale" content="en_US"/><meta data-react-helmet="true" property="og:site_name" content="Myeonggyu Lee"/><meta data-react-helmet="true" property="og:url" content="https://blog.mglee.devjpa에서-기본-키-매핑-방법-종류"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="JPA에서 기본 키 매핑 방법 종류"/><meta data-react-helmet="true" property="og:description"/><meta data-react-helmet="true" property="og:image" content="https://blog.mglee.dev/assets/banner.jpg"/><meta data-react-helmet="true" property="fb:app_id" content=""/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content=""/><meta data-react-helmet="true" name="twitter:title" content="JPA에서 기본 키 매핑 방법 종류"/><meta data-react-helmet="true" name="twitter:url" content="https://blog.mglee.dev"/><meta data-react-helmet="true" name="twitter:description"/><meta data-react-helmet="true" name="twitter:image" content="https://blog.mglee.dev/assets/banner.jpg"/><meta name="theme-color" content="#3498DB"/><style data-href="/styles.d6c1202e2fdd9f651b8b.css" data-identity="gatsby-global-css">@-webkit-keyframes fadeIn{0%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}to{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes fadeIn{0%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}to{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes slide{0%{opacity:0;-webkit-transform:translateX(-50rem) rotate(0deg);transform:translateX(-50rem) rotate(0deg)}to{opacity:1;-webkit-transform:translateX(0) rotate(0deg);transform:translateX(0) rotate(0deg)}}@keyframes slide{0%{opacity:0;-webkit-transform:translateX(-50rem) rotate(0deg);transform:translateX(-50rem) rotate(0deg)}to{opacity:1;-webkit-transform:translateX(0) rotate(0deg);transform:translateX(0) rotate(0deg)}}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#f8f8f2;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px rgba(0,0,0,.3);white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-text],pre[class*=language-text]{background:gray;border:1.5px solid #a9dbe6;border-radius:3rem;color:#000}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><title data-react-helmet="true">JPA에서 기본 키 매핑 방법 종류 | Scatch note</title><script data-react-helmet="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"BlogPosting","@id":"https://blog.mglee.devjpa에서-기본-키-매핑-방법-종류","url":"https://blog.mglee.devjpa에서-기본-키-매핑-방법-종류","name":"JPA에서 기본 키 매핑 방법 종류","alternateName":"Myeonggyu Lee(lee95292) programming logs","headline":"JPA에서 기본 키 매핑 방법 종류","image":{"@type":"ImageObject","url":"https://blog.mglee.dev/assets/banner.jpg"},"description":"Typescript Power Blog with big typography","datePublished":"13.01.2023","dateModified":"13.01.2023","author":{"@type":"Person","name":"Myeonggyu Lee"},"publisher":{"@type":"Organization","name":"Myeonggyu Lee","logo":{"@type":"ImageObject","url":"https://blog.mglee.devundefined"}},"isPartOf":"https://blog.mglee.dev/","mainEntityOfPage":{"@type":"WebSite","@id":"https://blog.mglee.dev/"}}]</script><style data-styled="" data-styled-version="5.3.9">.diMnJk{font-size:0.9rem;color:rgba(0,0,0,0.7);}/*!sc*/
data-styled.g1[id="Subline-sc-1don4fe-0"]{content:"diMnJk,"}/*!sc*/
.hfWoIM{position:relative;background:linear-gradient( -185deg,rgba(77,190,122,0.6),rgba(26,26,26,0.8) ),url(/assets/bg/1.jpg) no-repeat;background-size:cover;padding:8rem 8rem 10rem;}/*!sc*/
@media (max-width:1200px){.hfWoIM{padding:4rem 2rem 6rem;}}/*!sc*/
@media (max-width:600px){.hfWoIM{padding:1rem 0.5rem 2rem;}}/*!sc*/
data-styled.g6[id="Header__HeaderWrapper-sc-1pk7kz9-0"]{content:"hfWoIM,"}/*!sc*/
.jjwrwp{position:relative;z-index:999;}/*!sc*/
.jjwrwp a{color:#fff;}/*!sc*/
.jjwrwp a:hover{opacity:0.85;color:#fff;}/*!sc*/
data-styled.g7[id="Header__Content-sc-1pk7kz9-1"]{content:"jjwrwp,"}/*!sc*/
::selection{color:#fff;background:#72cc96;}/*!sc*/
body{background:#fff;word-break:keep-all;}/*!sc*/
@media (max-width:600px){body{font-size:0.8rem;}}/*!sc*/
a{color:rgba(0,0,0,0.9);-webkit-text-decoration:none;text-decoration:none;-webkit-transition:all 0.5s;transition:all 0.5s;}/*!sc*/
a:hover{color:#72cc96;}/*!sc*/
h1,h2,h3,h4{color:rgba(0,0,0,0.9);word-break:keep-all;font-weight:600;}/*!sc*/
h1{font-size:41px;margin-top:6rem;}/*!sc*/
h2{margin-top:4rem;}/*!sc*/
h3{margin-top:3rem;}/*!sc*/
blockquote{font-style:italic;position:relative;}/*!sc*/
blockquote:before{content:"";position:absolute;background:#72cc96;height:100%;width:0.6rem;margin-left:-1.6rem;}/*!sc*/
label{margin-bottom:.5rem;color:rgba(0,0,0,0.9);}/*!sc*/
input,textarea{border-radius:.5rem;border:none;background:rgba(0,0,0,0.05);padding:.25rem 1rem;}/*!sc*/
input:focus,textarea:focus{outline:none;}/*!sc*/
.textRight{text-align:right;}/*!sc*/
data-styled.g8[id="sc-global-iNLyFf1"]{content:"sc-global-iNLyFf1,"}/*!sc*/
.jLkDUm{background:none;border:0;padding:1rem;right:0;position:fixed;z-index:999;cursor:pointer;}/*!sc*/
.jLkDUm:focus{border:0;outline:none;}/*!sc*/
data-styled.g9[id="Layout__ModeButton-sc-1x5ezfr-0"]{content:"jLkDUm,"}/*!sc*/
.iAaLAi{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:6rem auto 0 auto;justify-items:center;}/*!sc*/
.iAaLAi a{color:#72cc96;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
data-styled.g10[id="PrevNext__Wrapper-sc-1qcv1tz-0"]{content:"iAaLAi,"}/*!sc*/
.fIRaVE span{text-transform:uppercase;font-size:0.8rem;color:rgba(0,0,0,0.5);}/*!sc*/
data-styled.g11[id="PrevNext__Prev-sc-1qcv1tz-1"]{content:"fIRaVE,"}/*!sc*/
.bLojpJ{margin-left:auto;text-align:right;}/*!sc*/
.bLojpJ span{text-transform:uppercase;font-size:0.8rem;color:rgba(0,0,0,0.5);}/*!sc*/
data-styled.g12[id="PrevNext__Next-sc-1qcv1tz-2"]{content:"bLojpJ,"}/*!sc*/
.etfwpe{font-size:2.9rem;text-transform:normal;text-align:center;color:#fff;position:relative;padding:2rem 0 0;margin-bottom:2rem;}/*!sc*/
.etfwpe:after{content:'';height:1px;width:50px;position:absolute;bottom:0;left:50%;margin-left:-25px;background:#fff;}/*!sc*/
data-styled.g13[id="SectionTitle-sc-6i07is-0"]{content:"etfwpe,"}/*!sc*/
.dDerja{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0 auto;max-width:100rem;padding:0 6rem;}/*!sc*/
@media (max-width:1200px){.dDerja{padding:0 3rem;}}/*!sc*/
@media (max-width:600px){.dDerja{padding:0 1rem;}}/*!sc*/
data-styled.g14[id="Wrapper-sc-eqkv0y-0"]{content:"dDerja,"}/*!sc*/
.hjsrss{box-shadow:0 0.4rem 12rem rgba(0,0,0,0.15);border-radius:1rem;padding:2rem 4rem;background-color:#fff;z-index:9000;margin-top:-4rem;margin-right:calc(-425px + 50%);margin-left:calc(-425px + 50%);max-width:950px;min-width:0px;}/*!sc*/
.hjsrss li{margin-bottom:5px;}/*!sc*/
.hjsrss form p label,.hjsrss form p input{display:block;}/*!sc*/
.hjsrss form p input{min-width:275px;}/*!sc*/
.hjsrss form p textarea{resize:vertical;min-height:150px;width:100%;}/*!sc*/
@media (max-width:1200px){.hjsrss{padding:3rem 3rem;margin:0;}}/*!sc*/
@media (max-width:600px){.hjsrss{padding:2rem 1.5rem;margin:0;}}/*!sc*/
data-styled.g15[id="Content-sc-b9laau-0"]{content:"hjsrss,"}/*!sc*/
.bvFuSq{margin-top:4rem;}/*!sc*/
data-styled.g19[id="Post__PostContent-sc-yg6lty-0"]{content:"bvFuSq,"}/*!sc*/
</style><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl+'';f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer', 'GTM-XXXXXXX');</script><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link href="//fonts.googleapis.com/css?family=ui-sans-serif,+-apple-system,+BlinkMacSystemFont+,+Segoe+UI,+Helvetica+,+Apple+Color+Emoji,+Arial,+sans-serif,+Segoe+UI+Emoji,+Segoe+UI+Symbol:700|sans-serif:400" rel="stylesheet" type="text/css"/><link rel="icon" href="/favicon-32x32.png?v=e53c568b1437d500bdcb8c0ca95416d1" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=e53c568b1437d500bdcb8c0ca95416d1"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=e53c568b1437d500bdcb8c0ca95416d1"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=e53c568b1437d500bdcb8c0ca95416d1"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=e53c568b1437d500bdcb8c0ca95416d1"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=e53c568b1437d500bdcb8c0ca95416d1"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=e53c568b1437d500bdcb8c0ca95416d1"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=e53c568b1437d500bdcb8c0ca95416d1"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=e53c568b1437d500bdcb8c0ca95416d1"/></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-XXXXXXX" height="0" width="0" style="display: none; visibility: hidden" aria-hidden="true"></iframe></noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><button class="Layout__ModeButton-sc-1x5ezfr-0 jLkDUm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#000" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button><header class="Header__HeaderWrapper-sc-1pk7kz9-0 hfWoIM"><div class="Header__Content-sc-1pk7kz9-1 jjwrwp"><a href="/"><b>Scatch note</b></a><div class="SectionTitle-sc-6i07is-0 etfwpe">JPA에서 기본 키 매핑 방법 종류</div><div class="Subline-sc-1don4fe-0 diMnJk">13.01.2023<!-- --> — <!-- -->4<!-- --> Min Read — In<!-- --> <a href="/categories/tech/">tech</a></div></div></header><div class="Wrapper-sc-eqkv0y-0 dDerja"><div class="Content-sc-b9laau-0 hjsrss"><div class="Post__PostContent-sc-yg6lty-0 bvFuSq"><p>JPA에서 엔티티와 데이터베이스의  기본 키(Primary Key) 매핑을 알아보겠습니다.</p>
<p>데이터베이스에는 <strong>유일성</strong> <strong>최소성</strong>을 만족하는지 여부에 따라 몇가지 키 종류가 존재합니다.</p>
<p><img src="https://user-images.githubusercontent.com/30853787/226088482-446952cd-6dc2-42a8-b0dd-10e0a9e20137.png" alt="1"></p>
<p><strong>유일성</strong>이란, 여러 레코드들 중, 하나의 레코드를 특정지을 수 있는 키의 특성입니다.</p>
<p>예를들어 이름,생일과 같은 특성은 레코드를 하나로 특정지을 수 없지만, [**학교 , 학번]**의 조합이나 [**주민등록번호]**와 같은 특성은 레코드를 유일하게 특정지을 수 있으므로 유일성을 만적하는 특성입니다.</p>
<p><strong>최소성</strong>이란, 레코드를 유일하게 식별하는데 꼭 필요한 최소한의 특성만 선택되어야한다는 키의 특성입니다.</p>
<p>예를 들어, <strong>[이름, 나이, 주민등록번호]</strong> 의 속성 조합으로 유일성을 만족하지만, 이름과 나이 없이 주민등록번호만으로 레코드를 유일하게 식별할 수 있으므로, <strong>최소성을 만족하지 못하는 키</strong>이고, <strong>[주민등록번호]</strong> 로 구성된 키는 <strong>최소성을 만족한다</strong>고 할 수 있습니다.</p>
<h2 id="jpa의-기본-키-매핑-방법" style="position:relative;"><a href="#jpa%EC%9D%98-%EA%B8%B0%EB%B3%B8-%ED%82%A4-%EB%A7%A4%ED%95%91-%EB%B0%A9%EB%B2%95" aria-label="jpa의 기본 키 매핑 방법 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JPA의 기본 키 매핑 방법</h2>
<p>데이터베이스 시스템에서는 보통 레코드의 기본 키를 설정하기 위한 디폴트 설정이 있습니다. 앞서 소개한 주민등록번호나 학교+학번은 사실 <strong>비즈니스 상 변경</strong>될 수도 있는 값이고, <strong>인덱스를 통해</strong> <strong>효율적으로 탐색</strong>하기에는 부적절한 키입니다.</p>
<p>그렇기때문에 데이터베이스 시스템에서는 비즈니스 로직과 관계 없는 고유한 값을 만들어 기본 키로 채택하는데요,   이번 글은 JPA에서 엔티티와 데이터베이스 테이블 간 “기본 키”를 어떻게 생성하고 매핑하는지 알아보겠습니다.</p>
<p>참고로 좋은 데이터베이스 기본 키를 선택하는 기준은 아래와 같습니다.</p>
<ul>
<li>Null값을 허용하지 않음</li>
<li>변하지 않음</li>
<li>유일함</li>
</ul>
<p>JPA로 엔티티를 한번 이상 만들어봤다면, 기본적으로 아래 구조를 띄는것을 알 수 있습니다.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Member</span><span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Id</span>
	<span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"id"</span><span class="token punctuation">)</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>이렇게 구성하면, Member테이블의 Key인 Id필드는 언제 지정될까요? 영속성 관리에서 배운것처럼, 엔티티는 바로 데이터베이스에 저장되지 않고 1차캐시에 저장됩니다.</p>
<p><em><strong>고치기</strong></em></p>
<p>만약 데이터베이스의 기본 키 생성 전략이 직접할당일 경우에는, 애플리케이션에서 엔티티의 키를 설정할 방법이 없을것입니다.</p>
<p>JPA에서는 데이터베이스 벤더별로 각기 다른 키 생성 전략과 자바 엔티티를 매핑하기 위해, @Id 컬럼에 여러 옵션들을 제공합니다.</p>
<h2 id="기본-키-생성-전략" style="position:relative;"><a href="#%EA%B8%B0%EB%B3%B8-%ED%82%A4-%EC%83%9D%EC%84%B1-%EC%A0%84%EB%9E%B5" aria-label="기본 키 생성 전략 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>기본 키 생성 전략</h2>
<p>기본키를 어떤 방식으로 생성하느냐에 따라, <strong>개발자가 키를 직접 설정하는</strong> 직접할당 전략, <strong>자동으로 키를 생성하는</strong>  IDENTITY, SEQUENCE, TABLE, AUTO 전략을 살펴봅니다.</p>
<p>아래의 Java 타입을 선언한 뒤, Id애너테이션을 통해 필드가 기본 키로 매핑되도록 합니다.</p>
<p>@<strong>Id필드 타입</strong></p>
<p>Id 애너테이션은 다음과 같은 자바 타입에서만 적용 가능합니다</p>
<ul>
<li>Primitive Types</li>
<li>Wrapper Types</li>
<li>String</li>
<li>java.util.Date</li>
<li>java.sql.Date</li>
<li>java.math.[bigDecimal, bigInteger]</li>
</ul>
<h3 id="직접-할당-전략" style="position:relative;"><a href="#%EC%A7%81%EC%A0%91-%ED%95%A0%EB%8B%B9-%EC%A0%84%EB%9E%B5" aria-label="직접 할당 전략 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>직접 할당 전략</h3>
<p>기본 키 직접 할당 전략은 프로그래머가 <strong>엔티티매니저에 영속되기 전에</strong> 엔티티의 키를 직접 할당하는 방식입니다.</p>
<p>이 방식에서 식별자 값 없이 영속시키면 PersistenceExeption이 발생합니다.</p>
<p><strong>설정방법:  Id</strong> 필드에 @Id 애너테이션을 적용하면 기본키를 직접 할당방식으로 테이블이 생성됩니다.</p>
<h3 id="identity-전략" style="position:relative;"><a href="#identity-%EC%A0%84%EB%9E%B5" aria-label="identity 전략 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IDENTITY 전략</h3>
<p>IDENTITY전략은 기본 키 생성 전략을 데이터베이스에 위임하는 방식입니다.</p>
<p>보통 AUTO_INCREMENT같은 자동 키 생성방법을 제공하는 MySQL, Postgresql, DB2등에서 사용합니다.</p>
<p><strong>설정방법: 필드에</strong> GeneratedValue 애너테이션, strategy 옵션을 GenerationType.IDENTITY로 설정</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Member</span><span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Id</span>
	<span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span>
	<span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><strong>em.persist(member) → insert query 날리고 → select query(id 포함된 레코드) → 영속성 컨텍스트에 저장</strong></p>
<p><strong>주의사항</strong></p>
<p>영속성 컨텍스트에 저장될때는 필수로 식별자 값이 필요한데, IDENTITY 전략에서는 기본 키를 데이터베이스에서 지정하므로, <strong>식별자를 알 수없다</strong>.</p>
<p>그러므로 IDENTITY전략을 사용하는 엔티티는 <strong>영속되는 시점에 INSERT쿼리를 데이터베이스에 전달</strong>한다.</p>
<p>따라서 <strong>IDENTITY전략에서는 트랜잭션을 지원하는 쓰기지연이 동작하지 않는다.</strong></p>
<p><strong>최적화 방법</strong></p>
<p>IDENTITY전략에서는 영속 시 INSERT쿼리를 데이터베이스에 전달하고, 식별자를 얻기 위해 추가로 조회작업을 해야해서 총 <strong>2번의 통신이 이뤄진다.</strong></p>
<p>JDBC3에서 추가된 Statement.getGeneratedKeys()를 사용하면, 데이터를 저장하면서 동시에 생성된 기본 키 값도 얻어올 수 있다.</p>
<h3 id="sequence-전략" style="position:relative;"><a href="#sequence-%EC%A0%84%EB%9E%B5" aria-label="sequence 전략 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SEQUENCE 전략</h3>
<p>데이터베이스에서 시퀀스는 유일한 값을 순서대로 생성하는 데이터베이스 오브젝트입니다. Sequence를 제공하는 Oracle,Postgresql, DB2,H2등에서 사용가능합니다.</p>
<p>SEQUENCE방법은 이를 통해 기본 키를 생성합니다.</p>
<p><strong>설정방법:</strong></p>
<ul>
<li>엔티티에 @SequenceGenerator 등록: 시퀀스 생성기 등록  옵션은 아래와 같습니다.
<ul>
<li>name : 엔티티에서 갖는 시퀀스생성기 이름(필수)</li>
<li>sequenceName : 데이터베이스의 시퀀스 이름</li>
<li>initialValue : DDL 생성시 처음 시작하는 숫자</li>
<li>allocationSize:시퀀스 호출 시 증가하는 숫자, 기본값 50 (최적화에 사용)</li>
<li>catalog, schema: 데이터베이스의  catalog, schema</li>
</ul>
</li>
<li>@GeneratedValue의 strategy 속성을 GenerationType.SEQUENCE로 설정</li>
</ul>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Entity</span>
<span class="token annotation punctuation">@SequenceGenerator</span><span class="token punctuation">(</span>
	name<span class="token operator">=</span><span class="token string">"MEMBER_SEQ_GENERATOR"</span><span class="token punctuation">,</span>  
	sequenceName<span class="token operator">=</span><span class="token string">"MEMBER_SEQ"</span><span class="token punctuation">,</span> 
	initialValue<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> 
	allocationSize<span class="token operator">=</span><span class="token number">1</span>  
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Member</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	
	<span class="token annotation punctuation">@Id</span>
	<span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy<span class="token operator">=</span><span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">SEQUENCE</span><span class="token punctuation">)</span>
	<span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>@SequenceGenerator의 옵션이 다양하게 존재하는것을 확인할 수 있다.</p>
<p><strong>참고사항1. 시퀀스 동작구조</strong></p>
<p>IDENTITY전략과 마찬가지로 ,데이터베이스에서 식별자 값을 가져와야 하지만 IDENTITY전략이 영속성 컨텍스트에서 Insert 쿼리를 날린 뒤 조회를 한것과는 달리, SEQUENCE 전략에서는 데이터베이스 시퀀스만 조회해 식별자값만 가져온다.</p>
<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> emp_seq<span class="token punctuation">.</span>NEXTVAL
     <span class="token punctuation">,</span> emp_seq<span class="token punctuation">.</span>CURRVAL
  <span class="token keyword">FROM</span> dual</code></pre></div>
<p>따라서 <strong>SEQUENCE전략은 트랜잭션을 사용하는 쓰기지연 방식을 지원하지만, 시퀀스를 추가적으로 조회한다</strong>.</p>
<p><strong>참고사항 2. allocationSize의 기본값이 50이다.</strong></p>
<p><strong>hibernate.id.new_generator_mappings 설정이 true인 경우, allocationSize</strong>는 <strong>기본적으로 50으로 설정됩니다. 이는 JPA의 시퀀스 접근횟수를 줄이기 위함이고, 아래와 같이 동작합니다.</strong></p>
<ul>
<li>JPA에서 데이터베이스 시퀀스에 접근</li>
<li>시퀀스는 <strong>allocationSize값인 50만큼 시퀀스를 생성</strong></li>
<li>JPA는 메모리에 1 ~ 50까지의 시퀀스를 메모리에 할당.</li>
<li>50개까지 엔티티가 생성되어도, 시퀀스를 생성하기 위해 DB에 접근하지 않아도 됨.</li>
</ul>
<p>멀티서버 환경에서는 엔티티가 생성된 순서대로 ID가 증가하지는 않지만, Insert성능 측면에서 가장 훌륭함.</p>
<h3 id="table-전략" style="position:relative;"><a href="#table-%EC%A0%84%EB%9E%B5" aria-label="table 전략 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TABLE 전략</h3>
<p>TABLE전략은 키 생성용 테이블을 만들고, 이름과 값으로 사용할 컬럼을 만들어 데이터베이스 시퀀스를 흉내내는 전략입니다. 또한, 테이블을 사용하므로 모든 데이터베이스에서 적용가능합니다.</p>
<p><strong>설정방법:</strong></p>
<ul>
<li>필드에 @GeneratedValue 등록, 아래의 속성 추가
<ul>
<li>strategy = GenerationType.Table,</li>
<li>generator = 시퀀스 생성테이블 이름(TableGenerator의 name속성 값) 등록</li>
</ul>
</li>
<li>엔티티에 @TableGenerator 등록 : 속성들이 많은데, 시퀀스 테이블을 구성하기 위한 이름과 관련된것들이 많습니다. 아래에서 설명합니다.
<ul>
<li>name: 식별자 생성기 이름 (필수)</li>
<li>table:  키 생성 테이블명 (기본값 - hibernate_sequence)</li>
<li>pkColumnValue:  키로 사용할 이름 [ Default - 엔티티명 ]</li>
<li>pkColumnName: 시퀀스 컬럼명 [ Default - sequence_name]</li>
<li>valueColumnName: 시퀀스 값 컬럼명 [ Default - next_val ]</li>
<li>initalValue: 초기 값 [ Default - 0 ]</li>
<li>allocationSize; 시퀀스 한번 호출에 증가하는 숫자(최적화용), [ Default  1 or 50: 최적화 설정 적용여부에 따라 ]</li>
<li>catalog, schema: 데이터베이스 catalog, schema 이름</li>
<li>uniqueConstraints: 유니크 제약조건</li>
</ul>
</li>
</ul>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@TableGenerator</span><span class="token punctuation">(</span>
	name<span class="token operator">=</span><span class="token string">"BOARD_SEQ_GENERATOR"</span><span class="token punctuation">,</span>
	table<span class="token operator">=</span><span class="token string">"MY_SEQUENCE"</span><span class="token punctuation">,</span>
	pkColumnValue<span class="token operator">=</span><span class="token string">"BOARD_SEQ"</span><span class="token punctuation">,</span> allocationSize<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Board</span><span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Id</span>
	<span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">TABLE</span><span class="token punctuation">,</span>
		generator <span class="token operator">=</span> <span class="token string">"BOARD_SEQ_GENERATOR"</span><span class="token punctuation">)</span>
	<span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>위와 같이 등록 하게 되면, 아래와 같이 시퀀스 이름과 시퀀스 값을 컬럼으로 갖는 테이블을 만들어 시퀀스를 관리합니다</p>
<p>앞서 @TableGenerator의 속성들 중 <del>Column</del> 같은 이름에 사용되는 속성들이 많이 보이는데요, 시퀀스테이블을 구성할 때 사용하는 이름입니다.</p>
<table>
<thead>
<tr>
<th>sequence_name</th>
<th>next_val</th>
</tr>
</thead>
<tbody>
<tr>
<td>BOARD_SEQ</td>
<td>102</td>
</tr>
<tr>
<td>MEMBER_SEQ</td>
<td>50</td>
</tr>
</tbody>
</table>
<p><strong>참고사항: 테이블전략 동작구조</strong></p>
<p>(시퀀스)테이블의 값을 조회하고, 이 값을 기반으로 Update쿼리를 한번 더 날리기때문에, 시퀀스 전략보다 네트워크 통신을 1회 더 한다는 단점이 있습니다.</p>
<p>이는 SEQUENCE방법과 같이 allocationSize를 통해 최적화할 수 있습니다.</p>
<h3 id="auto-전략" style="position:relative;"><a href="#auto-%EC%A0%84%EB%9E%B5" aria-label="auto 전략 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AUTO 전략</h3>
<p>@GeneratedValue.strategy의 기본 설정값인 AUTO전략입니다.</p>
<p>AUTO 전략은 선택한 데이터베이스 방언에 따라 IDENTITY, SEQUENCE, TABLE중 하나를 자동으로 선택합니다.</p>
<ul>
<li><strong>데이터베이스가 변경되어도 코드를 수정할 필요가 없습니다.</strong></li>
<li>MySQL은 IDENTITY, Oracle은 SEQUENCE방법 선택합니다.</li>
</ul>
<h2 id="매우매우-중요한-뽀인트" style="position:relative;"><a href="#%EB%A7%A4%EC%9A%B0%EB%A7%A4%EC%9A%B0-%EC%A4%91%EC%9A%94%ED%95%9C-%EB%BD%80%EC%9D%B8%ED%8A%B8" aria-label="매우매우 중요한 뽀인트 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>매우매우 중요한 뽀인트</h2>
<p>JPA에서 <strong>키 생성 전략은 INSERT성능에 중요한 영향을 미친다!!!</strong></p>
<h2 id="복습질문" style="position:relative;"><a href="#%EB%B3%B5%EC%8A%B5%EC%A7%88%EB%AC%B8" aria-label="복습질문 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>복습질문</h2>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled>  자동 키 생성전략: IDENTITY, SEQUENCE, TABLE 방법에서 영속성 컨텍스트에 식별자를 동기화하기 위해 각각은 어떻게 동작하나요?</li>
<li class="task-list-item"><input type="checkbox" disabled>  allocationSize 속성은 어떻게 키 생성 전략에서 최적화를 수행하나요?</li>
<li class="task-list-item"><input type="checkbox" disabled>  AUTO 생성전략은 무엇이고, 어떤 장점이 있나요?</li>
</ul>
<h2 id="챕터에-없지만-알아볼-내용" style="position:relative;"><a href="#%EC%B1%95%ED%84%B0%EC%97%90-%EC%97%86%EC%A7%80%EB%A7%8C-%EC%95%8C%EC%95%84%EB%B3%BC-%EB%82%B4%EC%9A%A9" aria-label="챕터에 없지만 알아볼 내용 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>챕터에 없지만 알아볼 내용</h2>
<ul class="contains-task-list">
<li class="task-list-item">
<p><input type="checkbox" disabled>  Table 방식과 Sequence 방식은 근본적으로 어떤 차이점이 있나요? (시퀸스는 테이블과 어떻게 다른가요?)</p>
</li>
</ul>
<h3 id="정답" style="position:relative;"><a href="#%EC%A0%95%EB%8B%B5" aria-label="정답 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>정답</h3>
<ul>
<li>각 방법에 대한 답변
<ul>
<li>IDENTITY의 경우, 데이터베이스에 키 생성전략을 위임한다. AUTO_INCREMENT같이 자동으로 기본 키를 설정해주는 MYSQL등에서 사용한다. (MySQL AUTO_INCREMENT가 적용되었을 때, id없이 insert 쿼리가 가능하다!). [ 삽입/조회 쿼리 발생, 쓰기지연 불가 ]</li>
<li>SEQUENCE는 증가하는 값을 생성해내는 객체로, 조회만을 통해 증가하는 값을 할당받아 엔티티의 키로 지정한다. [ 조회쿼리 발생, <strong>allocationSize로</strong> 최적화 가능 ]</li>
<li>TABLE은 키 할당 정보를 관리하는 테이블을 생성해 키를 매핑한다. Sequence와 유사하게 동작합니다. [ 조회/수정쿼리 발생, <strong>allocationSize로</strong> 최적화 가능 ]</li>
</ul>
</li>
<li>Table, Sequence방법에서 사용하는 최적화 전략으로, 키를 allocationSize만큼 할당받아 사용. 식별자를 생성하기 위해 N회 쿼리를 날리는것에서 N/allocationSize 만큼만 쿼리를 날리게 됨.</li>
<li>AUTO방식은 데이터베이스 방언에 맞는 자동 키 생성방식을 설정합니다. 데이터베이스 벤더가 변경되어도 코드가 변경될 필요가 없다는 장점이 있습니다.</li>
</ul>
<hr>
<ul>
<li>시퀀스는 select 시퀀스네임.nextval from dual 을 통해 다음 값을 조회하고 자동으로 증가합니다. 따라서 테이블 방식과 달리, Update 쿼리를 사용할 필요가 없어 효율적입니다.</li>
</ul></div><div class="Subline-sc-1don4fe-0 diMnJk">Tags:  <a href="/tags/jpa/"><strong>JPA</strong> <!-- -->, </a><a href="/tags/jpa-스터디/"><strong>JPA 스터디</strong> </a></div><div class="PrevNext__Wrapper-sc-1qcv1tz-0 iAaLAi"><div class="PrevNext__Prev-sc-1qcv1tz-1 fIRaVE"><span>Previous</span><a href="/blog/jpa에서-엔티티를-작성하는-방법/">JPA에서 엔티티를 작성하는 방법</a></div><div class="PrevNext__Next-sc-1qcv1tz-2 bLojpJ"><span>Next</span><a href="/blog/jpa-연관관계-매핑-기초/">JPA 연관관계 매핑 기초</a></div></div><div id="uterances-comments"></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/jpa에서-기본-키-매핑-방법-종류/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"polyfill\":[\"/polyfill-a8090a0c87bcdad8f096.js\"],\"app\":[\"/app-3f1b9b227538287963f6.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-47a460e3899ed02c5561.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-99dbbcac454baffd4284.js\"],\"component---src-pages-contact-tsx\":[\"/component---src-pages-contact-tsx-95bea91462aa5bc3b1c7.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-6664b3a4e9e5e0fd525f.js\"],\"component---src-pages-resume-jsx\":[\"/component---src-pages-resume-jsx-20b3165cb971b11e4b44.js\"],\"component---src-pages-sub-index-tsx\":[\"/component---src-pages-sub-index-tsx-978b8d1a065fca304036.js\"],\"component---src-pages-sub-resume-jsx\":[\"/component---src-pages-sub-resume-jsx-0cbb2d564dfd0863aeec.js\"],\"component---src-templates-all-category-tsx\":[\"/component---src-templates-all-category-tsx-54506622f9aeb19379f0.js\"],\"component---src-templates-all-tag-tsx\":[\"/component---src-templates-all-tag-tsx-8f9e68b207128d648856.js\"],\"component---src-templates-category-tsx\":[\"/component---src-templates-category-tsx-915e394f482f98f9c3ac.js\"],\"component---src-templates-post-tsx\":[\"/component---src-templates-post-tsx-c90ffb7a6538dde5f0bf.js\"],\"component---src-templates-tag-tsx\":[\"/component---src-templates-tag-tsx-485e6f208de105afbe8d.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="48c9f610d8ca311a72d7";</script><script src="/webpack-runtime-fb63fc61d8a99863b628.js" nomodule></script><script src="/polyfill-a8090a0c87bcdad8f096.js" nomodule></script><script src="/webpack-runtime-fb63fc61d8a99863b628.js" async></script><script src="/framework-67989501bd044d9f8b9c.js" async></script><script src="/app-3f1b9b227538287963f6.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>